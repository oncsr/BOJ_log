# [Diamond V] mex와 쿼리 - 16910 

[문제 링크](https://www.acmicpc.net/problem/16910) 

### 성능 요약

메모리: 58928 KB, 시간: 260 ms

### 분류

자료 구조, 세그먼트 트리, 느리게 갱신되는 세그먼트 트리, 값 / 좌표 압축

### 문제 설명

<p>mex는 어떤 수열에 포함되지 않은 수 중에서 가장 작은 자연수를 찾는 함수이다. 예를 들어, mex([1,2,3]) = 4, mex([5,3,1,1,4]) = 2, mex([1,5,2,1,5,2,1,2]) = 3이다.</p>

<p>비어있는 배열 A와 쿼리 N개가 주어졌을 때, 쿼리를 수행해보자. 쿼리는 총 3가지가 있으며, 아래와 같다.</p>

<ul>
	<li><code>1 l r</code>: 구간 [l, r]에 속하는 모든 자연수를 배열 A에 추가한다. 배열에 이미 있는 자연수는 또 추가하지 않는다.</li>
	<li><code>2 l r</code>: 구간 [l, r]에 속하는 모든 자연수를 배열 A에서 제거한다.</li>
	<li><code>3 l r</code>: 구간 [l, r]에 속하는 모든 자연수 x에 대해서, 다음을 수행한다.
	<ul>
		<li>x가 배열 A에 있으면, 배열에서 제거한다.</li>
		<li>x가 배열 A에 없으면, 배열에 추가한다.</li>
	</ul>
	</li>
</ul>

<p>각 쿼리를 수행한 다음에 mex(A)를 구해보자.</p>

### 입력 

 <p>첫째 줄에 쿼리의 개수 N(1 ≤ N ≤ 100,000)이 주어진다. 둘째 줄부터 N개의 줄에는 쿼리를 나타내는 q, l, r (1 ≤ q ≤ 3, 1 ≤ l ≤ r ≤ 10<sup>18</sup>)이 주어진다.</p>

### 출력 

 <p>각각의 쿼리를 수행한 후에 mex(A)를 출력한다.</p>

